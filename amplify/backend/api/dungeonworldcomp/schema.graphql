# This "input" configures a global authorization rule to enable public access to
# all models in this schema. Learn more about authorization rules here: https://docs.amplify.aws/cli/graphql/authorization-rules
input AMPLIFY { globalAuthRule: AuthRule = { allow: public } } # FOR TESTING ONLY!

type User {
  id: ID!
  name: String!
  email: String!
  # Add other user-related fields as needed
}

type Source {
  id: ID!
  name: String!
}

type CharacterClass {
  id: ID!
  class: Class!
}

type Class {
  id: ID!
  name: String!
  description: String!
  source: Source!
  damageDiceType: DiceType
}

type Spell {
  id: ID!
  name: String!
  level: Int!
  type: String!
  ongoing: Boolean
  description: String!
  source: Source!
  class: Class!
}

type CharacterSpell {
  id: ID!
  spell: Spell!
  selected: Boolean
  tags: [String]
}

type CharacterGear {
  id: ID!
  gear: Gear!
  uses: Int
  tags: [String]
}

type Gear {
  id: ID!
  description: String!
  weight: Int!
  uses: Int
  tags: [String]
}


type CharacterMove {
  id: ID!
  selected: Boolean
  move: Move!
}

type Move {
  id: ID!
  description: String!
  class: Class!
}

type CharacterBond {
  id: ID!
  description: String
  bond: Bond!
  selected: Boolean
}

type Bond {
  id: ID!
  description: String
  class: Class!
}

type CharacterAbilityScore {
  abilityScore: AbilityScore!
  value: String!
  bonus: Int!
  tags: [String]
}

type AbilityScore {
  id: ID!
  name: String!
  shortName: String!
  debility: String!
  debilityPenalty: String!
}

type CharacterRace {
  id: ID!
  race: Race!
}

type Race {
  id: ID!
  name: String
  description: String
  class: Class
  source: Source!
}

type CharacterAlignment {
  id: ID!
  alignment: Alignment!
  selected: Boolean
}

type Alignment {
  id: ID!
  name: String
  description: String
  class: Class!
}

type DiceType {
  id: ID!
  name: String
}

type CharacterConditions {
  id: ID!
  conditionTypes: [ConditionType]
}

type Condition {
  id: ID!
  description: String!
  selected: Boolean
}

type ConditionType {
  id: ID!
  name: String!
  conditions: [Condition]
}

type CharacterLook {
  id: ID!
  look: [Look]!
}

type Look {
  id: ID!
  name: String!
  description: String!
  class: Class!
}

type Character {
  userId: ID!
  id: ID!
  name: String!
  level: Int
  xp: Int
  armor: Int
  hitPointsMax: Int
  hitPointsCurrent: Int
  coin: Int
  loadMax: Int
  loadCurrent: Int
  isPublic: Boolean
  isCoreTemplate: Boolean
  spells: [CharacterSpell]
  gear: [CharacterGear]
  sixToTenMoves: [CharacterMove]
  twoToTenMoves: [CharacterMove]
  startingMoves: [CharacterMove]
  bonds: [CharacterBond]
  abilityscores: [CharacterAbilityScore]
  race: CharacterRace
  alignment: CharacterAlignment
  tags: [String]
  conditionTypes: [CharacterConditions]
  look: CharacterLook
  class: CharacterClass
  notes: String
}

type Query {
  getCharacter(characterId: ID!): Character
  getUserCharacters(userId: ID!): [Character]
  getCoreClassTemplates: [Character]            # Return a list of all characters that are CW Core Class templates
  getClasses: [Class]
  getSpells: [Spell]
  getSpellsByClass(className: String!): [Spell]
  getDiceTypes: [DiceType]
  getRaces: [Race]
  getMoves: [Move]
  getMovesByClass(className: String!): [Move]
}

type Mutation {
  duplicateCharacter(characterId: ID!, newUserId: ID!): Character
}
